<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>pamatcher</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remodal/1.0.4/remodal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remodal/1.0.4/remodal-default-theme.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.7.0/codemirror.min.css">
    <style>
      #try .CodeMirror {
        border: 1px solid gray;
        line-height: 1em;
        height: 5.8em;
        margin-bottom: 20px;
      }

      #try .CodeMirror pre {
        box-shadow: unset;
      }

      #try-buttom {
        display: none;
      }

      #try #result {
        padding: 10px 0px;
        font-size: large;
        text-align: right;
        float: right;
        font-weight: bold;
      }

      #try #ok, #try #fail {
        display: none;
      }

      #try #ok {
        color: green;
      }

      #try #fail {
        color: red;
      }

      #try #test {
        float: left;
      }

      #try .remodal-confirm {
        background: #00a;
      }

      #try .remodal-confirm:hover, #try .remodal-confirm:focus {
        background: #00f;
      }

      #try .remodal-close {
        left: auto;
        right: 5px;
      }

      #try h1 {
        color: darkGray;
      }

      #try fieldset {
        text-align: left;
        border: 0;
      }

      #try label {
        display: block;
        margin-bottom: 14.76px;
      }

      #try textarea {
        width: 100%;
        border: 1px solid #CCC;
        margin-bottom: 18px;
        padding: 5.4px 6.3px;
      }
    </style>
    <script src="https://jspm.io/system@0.19.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/remodal/1.0.4/remodal.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.7.0/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.7.0/mode/javascript/javascript.min.js"></script>
    <script type="text/javascript">
      $(function() {
          var options = {
            mode: "javascript"
          };

          var patternArea = CodeMirror.fromTextArea(document.getElementById('pattern'), options);
          var inputArea = CodeMirror.fromTextArea(document.getElementById('input'), options);

          System.import('npm:pamatcher').then(function(pamatcher) {
              $("#try-buttom").show();

              $(document).on('opening', '.remodal', function () {
                $('#ok, #fail').hide();
                patternArea.refresh();
                inputArea.refresh();
              });

              $("#try textarea").on('change keyup paste', (e) => {
                $('#ok, #fail').hide();
              });

              $("#test").click((e) => {
                $('#ok, #fail').hide();

                var pattern = eval(patternArea.getValue());
                var input = eval(inputArea.getValue());

                var matcher = pamatcher(pattern);
                var result = matcher.test(input);

                if(result) {
                    $('#ok').show();
                } else {
                    $('#fail').show();
                }
              });
          });
      });
    </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div class="remodal" data-remodal-id="try" id="try">
        <button data-remodal-action="close" class="remodal-close"></button>
        <h1>Try pamatcher!</h1>
        <form>
          <fieldset>
            <label for='pattern'>Pattern</label>
            <textarea rows='4' id='pattern'>[
  (i) => i < 10,
  { repeat: (i) => i%2==0 },
  (i) => i > 10
]</textarea>

            <label for='input'>Input</label>
            <textarea rows='4' id='input'>[1, 4, 8, 44, 55]</textarea>
          </fieldset>
          <button id='test' type='submit' class="remodal-confirm">Test</button>
          <div id='result'>
            <div id='ok'><i class="fa fa-check-circle"></i> Pattern matches!</div>
            <div id='fail'><i class="fa fa-ban"></i> Pattern doesn't match.</div>
          </div>
        </form>
      </div>

      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/pmros/pamatcher">View On GitHub</a></li>
          <li class="downloads" id="try-buttom"><a href="#try">Try pamatcher!</a></li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>pamatcher</h1>
          <p>A pattern matching library for JavaScript</p>
        </div>


<p><strong>pamatcher</strong> is something like regular expressions but is more general. Instead strings, you can use any iterable or iterator as input. Instead of characters you can use any predicate as item matcher. So you can do pattern matching in a general and declarative way.</p>

<p>Tested on node.js 4.1.1.</p>

<h2>
<a id="installation-and-usage" class="anchor" href="#installation-and-usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation and usage</h2>

<p>You can install pamatcher using npm:</p>

<div class="highlight highlight-source-shell"><pre>npm install pamatcher</pre></div>

<p>If you want to use pamatcher from browser, you can use <a href="http://jspm.io/">jspm</a>. Here you have a complete pamatcher demo for browser at <a href="https://gist.github.com/pmros/137ecf2351e0f2fe44d4">gist</a> (or live at <a href="http://bl.ocks.org/pmros/137ecf2351e0f2fe44d4">bl.ocks.org</a>).</p>

<p>This is an example of use:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> pamatcher <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>pamatcher<span class="pl-pds">'</span></span>);

<span class="pl-k">var</span> matcher <span class="pl-k">=</span> pamatcher(
  (<span class="pl-smi">i</span>)<span class="pl-k"> =&gt;</span> i <span class="pl-k">&lt;</span> <span class="pl-c1">10</span>,
  { repeat<span class="pl-k">:</span> (<span class="pl-smi">i</span>)<span class="pl-k"> =&gt;</span> i<span class="pl-k">%</span><span class="pl-c1">2</span><span class="pl-k">==</span><span class="pl-c1">0</span> },
  (<span class="pl-smi">i</span>)<span class="pl-k"> =&gt;</span> i <span class="pl-k">&gt;</span> <span class="pl-c1">10</span>
);

<span class="pl-k">var</span> result <span class="pl-k">=</span> matcher.<span class="pl-c1">test</span>([<span class="pl-c1">1</span>, <span class="pl-c1">4</span>, <span class="pl-c1">8</span>, <span class="pl-c1">44</span>, <span class="pl-c1">55</span>]);
<span class="pl-k">if</span>(result) {
  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>Pattern matches!<span class="pl-pds">"</span></span>);
} <span class="pl-k">else</span> {
  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>Pattern doesn't match.<span class="pl-pds">"</span></span>);
}</pre></div>

<p>In the example, the pattern is simple: match a number lesser than 10, followed by zero o more even numbers and finally a number greater than 10. You test an array and it should print "Pattern matches!".</p>
<p><a href="#try">Try pamatcher!</a></p>

<h2>
<a id="api" class="anchor" href="#api" aria-hidden="true"><span class="octicon octicon-link"></span></a>API</h2>

<h3>
<a id="pamatcherexpression" class="anchor" href="#pamatcherexpression" aria-hidden="true"><span class="octicon octicon-link"></span></a>pamatcher(expression)</h3>

<p>This is a function that transforms a pattern expression into a <a href="#matcher-object">matcher</a>. This is the only thing you need to import/require to use pamatcher library.</p>

<p>A pattern expression is a JavaScript object that specify the pattern you want to use. A pattern expression can be:</p>

<h4>
<a id="function" class="anchor" href="#function" aria-hidden="true"><span class="octicon octicon-link"></span></a>[function]</h4>

<p>A predicate, that is a function that takes an input item, evaluates it and return a boolean. True means "item accepted".</p>

<h4>
<a id="-value-whatever-" class="anchor" href="#-value-whatever-" aria-hidden="true"><span class="octicon octicon-link"></span></a>{ value: [whatever] }</h4>

<p>This is a shortcut for a (deep) equality predicate.</p>

<h4>
<a id="-sequence-array-of-expressions-" class="anchor" href="#-sequence-array-of-expressions-" aria-hidden="true"><span class="octicon octicon-link"></span></a>{ sequence: [array of expressions] }</h4>

<p>A sequence of expressions.
It's something like this regex:  /abc/
Usually pamatcher can convert arrays of expressions to a sequence expression for a better readability. Also pamatcher function can automatically convert any number of arguments to a sequence expression (see example above).</p>

<h4>
<a id="-or-expressions-or-array-of-expressions-" class="anchor" href="#-or-expressions-or-array-of-expressions-" aria-hidden="true"><span class="octicon octicon-link"></span></a>{ or: [expressions or array of expressions] }</h4>

<p>Logical or of multiple expressions.
It's something like this regex:  /(a|b|c)/</p>

<h4>
<a id="-optional-expression-" class="anchor" href="#-optional-expression-" aria-hidden="true"><span class="octicon octicon-link"></span></a>{ optional: [expression] }</h4>

<p>An optional expression.
It's something like this regex:  /a?/</p>

<h4>
<a id="-repeat-expression-" class="anchor" href="#-repeat-expression-" aria-hidden="true"><span class="octicon octicon-link"></span></a>{ repeat: [expression] }</h4>

<p>A sequence of zero o more expressions repeated.
It's something like this regex:  /a*/</p>

<h3>
<a id="matcher-object" class="anchor" href="#matcher-object" aria-hidden="true"><span class="octicon octicon-link"></span></a>matcher object</h3>

<p>A matcher object can check if your expression matches to an input.</p>

<h4>
<a id="matchertestinput" class="anchor" href="#matchertestinput" aria-hidden="true"><span class="octicon octicon-link"></span></a>matcher.test(input)</h4>

<p>The input is an iterator or an iterable. These are ES6 features. Array, String, Map, Set are iterables.</p>

<p>test method returns true if your pattern expression matchs your input, otherwise it returns false.</p>

<h2>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO</h2>

<ul>
<li>[x] Pattern expressions.</li>
<li>[x] Browser suport.</li>
<li>[ ] Cardinality for repeat pattern.</li>
<li>[ ] Better documentation.</li>
<li>[ ] More tests.</li>
</ul>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/pmros">pmros</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>

      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->


  </body>
</html>
